<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Deyun.io</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!--<link href="css/plugins/dataTables/datatables.min.css" rel="stylesheet">-->
    <!-- FooTable -->
    <link href="css/plugins/footable/footable.core.css" rel="stylesheet">

</head>

<body class="top-navigation">

    <div id="wrapper">
        <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom white-bg">
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-header">
                {% cache 60*5 %}
                <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
                    <i class="fa fa-reorder"></i>
                </button>
                <a href="dashboard_4.html#" class="navbar-brand">Deyun.io</a>
            </div>
            {% set active_page = active_page|default('index') %}
            <div class="navbar-collapse collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a aria-expanded="false" role="button" href="index.html"> Main </a>
                    </li>
                    <li class="dropdown">
                        <a aria-expanded="false" role="button" href="index.html#" class="dropdown-toggle" data-toggle="dropdown"> Asset Manager <span class="caret"></span></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="{{ url_for('frontend.closed') }}" >Toplogy</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">List</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Search</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Service</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a aria-expanded="false" role="button" href="index.html#" class="dropdown-toggle" data-toggle="dropdown"> Monitor <span class="caret"></span></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="{{ url_for('frontend.closed') }}">Perf</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Event</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Log</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Http</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a aria-expanded="false" role="button" href="index.html#" class="dropdown-toggle" data-toggle="dropdown"> State <span class="caret"></span></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="{{ url_for('frontend.closed') }}">Apply</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">History</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">New</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Run CMD</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a aria-expanded="false" role="button" href="index.html#" class="dropdown-toggle" data-toggle="dropdown"> Settings <span class="caret"></span></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="{{ url_for('frontend.closed') }}">Node Register</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">Master Manager</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">SSH Auth</a></li>
                            <li><a href="{{ url_for('frontend.closed') }}">User Profile</a></li>
                        </ul>
                    </li>

                </ul>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <a href="{{ url_for('frontend.logout') }}">
                            <i class="fa fa-sign-out"></i> Log out
                        </a>
                    </li>
                </ul>       
                {% endcache %}
                {% include "sidebar.html" %}
            </div>
        </nav>
        </div>


         <!-- Mainly scripts -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>

    <!-- Flot -->
    <script src="js/plugins/flot/jquery.flot.js"></script>
    <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="js/plugins/flot/jquery.flot.spline.js"></script>
    <script src="js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="js/plugins/flot/jquery.flot.pie.js"></script>
    <script src="js/plugins/flot/jquery.flot.symbol.js"></script>
    <script src="js/plugins/flot/jquery.flot.time.js"></script>

    <!-- ChartJS-->
    <script src="js/plugins/chartJs/Chart.min.js"></script>

    <!-- Peity -->
    <script src="js/plugins/peity/jquery.peity.min.js"></script>
    <!-- Peity demo -->
    <script src="js/demo/peity-demo.js"></script>

        <!-- Sparkline -->
    <script src="js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <!--<script src="js/plugins/dataTables/datatables.min.js"></script>-->
    <script src="js/plugins/footable/footable.all.min.js"></script>
    <!--raphael and cloudrelation-->
    <script src="js/plugins/cloudrelation/raphael.js"></script>

    <script src="js/plugins/cloudrelation/cloudRelation.js"></script>

    <script src="js/plugins/cytoscape/cytoscape.js"></script>
    <!--dagra 0.74-->
    <script src="js/dagre.min.js"></script>
    <!--cytoscape-dagre 1.12-->
    <script src="js/cytoscape-dagre.js"></script>
    <!--socketio 1.35-->
    <script type="text/javascript" src="js/socket.io.min.js"></script>

    <script src="js/data.js"></script>
            
        {% block content %}{% endblock %}
    

    
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            function cleardata(e)
            { 
                data = document.getElementsByClassName(e);
                for( var i = 0; i < data.length; i++) { data[i].innerHTML = ""};             


            }
            function hidedata(e)
            { 
                data = document.getElementsByClassName(e);
                for( var i = 0; i < data.length; i++) { data[i].style.visibility = "hidden"};
            }
            function showdata(e)
            { 

                data = document.getElementsByClassName(e);
                for( var i = 0; i < data.length; i++) { data[i].style.visibility = "visible"};
            }
            function hideloading(e)
            { 

                data = document.getElementsByClassName(e);
                for( var i = 0; i < data.length; i++) {
                data[i].style.visibility = "hidden";
                data[i].style.animationPlayState = "paused";
                    };
            }
            function showloading(e)
            { 
                data = document.getElementsByClassName(e);
                for( var i = 0; i < data.length; i++) {
                data[i].style.visibility = "visible";
                data[i].style.animationPlayState = "running";
                    };
            }
            function update_sitestatus(j){
                ///console.log(j);
                data = JSON.parse(j);
                document.getElementById('node').innerHTML = data.managed_nodes;
                document.getElementById('sc').innerHTML =  data.system_capacity;
                document.getElementById('su').innerHTML =  data.system_utilization + '%';
                document.getElementById('user').innerHTML =  data.user_count;
                document.getElementById('mm').innerHTML =  data.registered_master;
                document.getElementById('task').innerHTML =  data.total_task;
                document.getElementById('sl').innerHTML =  data.service_level + '%';
                document.getElementById('up').innerHTML = data.uptime + 'd';
                hideloading('site-loading');

            }
            ///node sc su  user mm task sl up 
        
            socket.on('connect', function(msg) {
                socket.emit('my_event', {data: 'I\'m connected!'});
                console.log('I\'m connected! :' + msg);
            });
            socket.on('sitestatus', function(msg) {
                console.log('sitestatus:' + msg);
                update_sitestatus(msg);
            });
            socket.on('func_init', function(msg) {
                console.log('function : ' + msg + ' initialized ');
               switch (msg) {
                            case 'sitestatus':
                                cleardata('sitestatus');
                                showloading('site-loading');
                                socket.emit('func_init',{data: msg})
                                break;
                            case 'm_status':
                                hidedata('m_status');
                                showloading('m-loading');
                                socket.emit('func_init',{data: msg})
                                break;
                            case 2:
                                
                                break;
                            case 3:
                                
                                break;
                            case 4:
                                
                                break;
                            case 5:
                                
                                break;
                            case 6:
                                break;
                            default:
                                 console.log('wrong function name');
                        } 

            });
            socket.on('status', function(msg) {
                console.log('status:' + msg);
            });


            // Event handler for server sent data.
            // The callback function is invoked whenever the server emits data
            // to the client. The data is then displayed in the "Received"
            // section of the page.
            
            });
        </script>

        <div class="footer">
            <div class="pull-right">
                10GB of <strong>250GB</strong> Free.
            </div>
            <div>
                <strong>Copyright</strong> Deyun.io &copy; 2014-2015
            </div>
        </div>

        </div>
        </div>


   


   

</body>

</html>
